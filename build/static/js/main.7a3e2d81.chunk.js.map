{"version":3,"sources":["components/header/Header.jsx","components/start-form/StartForm.jsx","components/stats/Stats.jsx","components/end-game-window/EndGameWindow.jsx","components/field/Field.jsx","components/cell/Cell.jsx","components/ships-select-area/ShipsSelectArea.jsx","components/selected-ship/SelectedShip.jsx","pages/Home.jsx","pages/game/Player.js","pages/game/Game.jsx","pages/EndGame.jsx","App.js","index.js"],"names":["Header","className","StartForm","setGameProps","defaultName","React","useState","name","setName","side","setSide","changeSide","e","newSide","target","value","onChange","newName","onClick","onBlur","type","checked","to","Stats","stats","setStats","useEffect","JSON","parse","localStorage","getItem","map","winCount","loseCount","EndGameWindow","winnerName","removePlayersNames","Field","id","isPlayerField","selectedShip","sendRotate","removeSelectedShip","endDeployState","shipsLengths","isDeployState","isCurMove","changeMove","endGame","cells","setCells","ships","setShips","curSelectedShip","setCurSelectedShip","preshowedShip","setPreshowedShip","preshowedCell","setPreshowedCell","isIncorrectDeploy","setIsIncorrectDeploy","aiMoves","setAiMoves","playerMoves","setPlayerMoves","deadsCount","setDeadsCount","init","aiDeploy","shipPreshow","deployShip","length","makeAiMove","fieldCells","i","Array","j","forEach","shipLength","rndShipDeploy","setTimeout","getRndCoords","isRotate","getRandomInt","min","max","Math","ceil","floor","random","shipIndexCheck","iCoord","jCoord","shipIndex","shipCells","cellPreshow","coords","inc","dec","shipExpansion","isEvenLength","curPreshowedShipCells","isIncorrect","expansion","isRemoveTail","outFieldPreshowCheck","push","unoccupiedCellsCheck","hp","ship","occupiedCellsCombinations","occupiedCells","flat","occupiedCoords","find","preshowCheck","hit","shipId","prewDeadsCount","moveCheck","moves","rndCoords","makePlayerMove","onMouseLeave","row","cell","isPlayerCell","preshow","bind","isDead","isAiMove","isPlayerMove","makeMove","isPreshowCell","isIncorrectPreshow","Cell","selectShip","isSelectedShip","isShip","isHit","setIsHit","isMiss","setIsMiss","isHandleMove","showMove","click","onMouseOver","style","transition","ShipsSelectArea","sendShip","shipsInit","initShips","column","shipCell","filter","x","pageX","y","pageY","SelectedShip","setX","setY","width","setWidth","height","setHeight","columns","setColumns","rows","setRows","setIsRotate","renderShip","setRenderShip","createShip","listener","moveAt","rotateShip","document","addEventListener","removeEventListener","preventDefault","prevIsRotate","renderedShip","left","top","gridTemplateColumns","gridTemplateRows","transform","Home","Player","this","isAi","Game","gameProps","sendPlayersNames","isEndGame","players","curPLayer","setCurPlayer","setSelectedShip","setIsDeployState","changeDeployState","prevDeployState","winGame","fieldId","loserId","loserName","changeCurPlayer","prevCurPlayer","curPlayerId","setRotate","rotate","prevShip","player","zIndex","EndGame","App","playersNames","setPlayersNames","saveStats","playerStat","stat","isWinStat","count","statsSort","stringify","setItem","sort","a","b","path","render","exact","ReactDOM","getElementById"],"mappings":"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","file":"static/js/main.7a3e2d81.chunk.js","sourcesContent":["function Header() {\r\n  return (\r\n    <div className=\"header\">\r\n      <h1 className=\"header__title\">Морской бой</h1>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Header;\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nfunction StartForm({ setGameProps }) {\r\n  const defaultName = \"Player\";\r\n  const defaultSide = \"right\";\r\n\r\n  const [name, setName] = React.useState(defaultName);\r\n  const [side, setSide] = React.useState(defaultSide);\r\n\r\n  const changeName = (e) => {\r\n    const newName = e.target.value;\r\n    setName(newName);\r\n  };\r\n\r\n  const clearDefaulName = (e) => {\r\n    const name = e.target.value;\r\n\r\n    if (name === defaultName) {\r\n      setName(\"\");\r\n    }\r\n  };\r\n\r\n  const setDefaulName = (e) => {\r\n    const name = e.target.value;\r\n\r\n    if (name === \"\") {\r\n      setName(defaultName);\r\n    }\r\n  };\r\n\r\n  const changeSide = (e) => {\r\n    const newSide = e.target.value;\r\n    setSide(newSide);\r\n  };\r\n\r\n  const submit = () => setGameProps({ name, side });\r\n\r\n  return (\r\n    <form className=\"start-form\">\r\n      <div className=\"start-form__wrapper\">\r\n        <fieldset className=\"start-form__fieldset\">\r\n          <legend className=\"start-form__legend\">\r\n            <h2 className=\"start-form__title\">Имя</h2>\r\n          </legend>\r\n          <input\r\n            className=\"start-form__input-name\"\r\n            name=\"name\"\r\n            value={name}\r\n            onChange={changeName}\r\n            onClick={clearDefaulName}\r\n            onBlur={setDefaulName}\r\n          />\r\n        </fieldset>\r\n\r\n        <fieldset className=\"start-form__fieldset\">\r\n          <legend className=\"start-form__legend\">\r\n            <h2 className=\"start-form__title\">Сторона</h2>\r\n          </legend>\r\n\r\n          <label className=\"start-form__radio-wrapper\">\r\n            <input\r\n              className=\"start-form__input-side\"\r\n              type=\"radio\"\r\n              name=\"side\"\r\n              value={\"left\"}\r\n              checked={side === \"left\"}\r\n              onChange={changeSide}\r\n            />\r\n            <div className=\"start-form__input-side-text\">левая😰</div>\r\n          </label>\r\n\r\n          <label className=\"start-form__radio-wrapper\">\r\n            <input\r\n              className=\"start-form__input-side\"\r\n              type=\"radio\"\r\n              name=\"side\"\r\n              value={\"right\"}\r\n              checked={side === \"right\"}\r\n              onChange={changeSide}\r\n            />\r\n            <div className=\"start-form__input-side-text\">правая😎</div>\r\n          </label>\r\n        </fieldset>\r\n      </div>\r\n      <div className=\"start-form__btn-wrapper\">\r\n        <Link to=\"/game\">\r\n          <button className=\"start-form__btn\" onClick={submit}>\r\n            Играть\r\n          </button>\r\n        </Link>\r\n      </div>\r\n    </form>\r\n  );\r\n}\r\n\r\nexport default StartForm;\r\n","import React from \"react\";\r\n\r\nfunction Stats() {\r\n  const [stats, setStats] = React.useState();\r\n\r\n  React.useEffect(\r\n    () => setStats(JSON.parse(localStorage.getItem(\"stats\"))),\r\n    []\r\n  );\r\n\r\n  return stats ? (\r\n    <div className=\"stats\">\r\n      <h1 className=\"stats__title\">Статистика</h1>\r\n      <table className=\"stats__table\">\r\n        <tbody className=\"stats__table-body\">\r\n          <tr className=\"stats__table-title-row\">\r\n            <th className=\"stats__table-title\">Имя игрока</th>\r\n            <th className=\"stats__table-title\">Победы</th>\r\n            <th className=\"stats__table-title\">Поражения</th>\r\n          </tr>\r\n          {stats.map(({ name, winCount, loseCount }) => (\r\n            <tr className=\"stats__table-row\" key={name}>\r\n              <th className=\"stats__table-cell\">{name}</th>\r\n              <th className=\"stats__table-cell\">{winCount}</th>\r\n              <th className=\"stats__table-cell\">{loseCount}</th>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  ) : null;\r\n}\r\n\r\nexport default Stats;\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nfunction EndGameWindow({ winnerName, removePlayersNames }) {\r\n  return (\r\n    <div className=\"end-game-window\">\r\n      <h2 className=\"end-game-window__title\">\r\n        Игрок {winnerName} одержал победу!\r\n      </h2>\r\n      <div className=\"end-game-window__btn-wrapper\">\r\n        <Link to=\"/\">\r\n          <button\r\n            className=\"end-game-window__btn\"\r\n            onClick={() => removePlayersNames()}\r\n          >\r\n            Выход\r\n          </button>\r\n        </Link>\r\n        <Link to=\"/game\">\r\n          <button\r\n            className=\"end-game-window__btn\"\r\n            onClick={() => removePlayersNames()}\r\n          >\r\n            Играть ещё\r\n          </button>\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default EndGameWindow;\r\n","import React from \"react\";\r\n\r\nimport { Cell, SelectedShip } from \"../\";\r\n\r\nconst Field = ({\r\n  id,\r\n  isPlayerField,\r\n  selectedShip,\r\n  sendRotate,\r\n  removeSelectedShip,\r\n  endDeployState,\r\n  shipsLengths,\r\n  isDeployState,\r\n  isCurMove,\r\n  changeMove,\r\n  endGame,\r\n}) => {\r\n  const [cells, setCells] = React.useState();\r\n  const [ships, setShips] = React.useState([]);\r\n  const [curSelectedShip, setCurSelectedShip] = React.useState();\r\n  const [preshowedShip, setPreshowedShip] = React.useState();\r\n  const [preshowedCell, setPreshowedCell] = React.useState();\r\n  const [isIncorrectDeploy, setIsIncorrectDeploy] = React.useState();\r\n  const [aiMoves, setAiMoves] = React.useState([]);\r\n  const [playerMoves, setPlayerMoves] = React.useState([]);\r\n  const [deadsCount, setDeadsCount] = React.useState(0);\r\n\r\n  React.useEffect(() => {\r\n    init();\r\n    !isPlayerField && aiDeploy();\r\n  }, []);\r\n\r\n  React.useEffect(() => !isPlayerField && shipPreshow(), [curSelectedShip]);\r\n\r\n  React.useEffect(() => !isPlayerField && deployShip(), [preshowedShip]);\r\n\r\n  React.useEffect(\r\n    () =>\r\n      isPlayerField && ships.length === shipsLengths.length && endDeployState(),\r\n    [ships.length]\r\n  );\r\n\r\n  React.useEffect(() => isPlayerField && setCurSelectedShip(selectedShip), [\r\n    selectedShip,\r\n  ]);\r\n\r\n  React.useEffect(() => isPlayerField && shipPreshow(), [\r\n    preshowedCell,\r\n    curSelectedShip,\r\n  ]);\r\n\r\n  React.useEffect(() => isPlayerField && isCurMove && makeAiMove(), [\r\n    isCurMove,\r\n  ]);\r\n\r\n  React.useEffect(() => changeMove(), [aiMoves, playerMoves]);\r\n\r\n  React.useEffect(\r\n    () => !isDeployState && deadsCount === ships.length && endGame(id),\r\n    [deadsCount]\r\n  );\r\n\r\n  const init = () => {\r\n    const fieldCells = [];\r\n\r\n    for (let i = 0; i < 10; i++) {\r\n      fieldCells[i] = new Array(10);\r\n\r\n      for (let j = 0; j < 10; j++) {\r\n        fieldCells[i][j] = null;\r\n      }\r\n    }\r\n\r\n    setCells(fieldCells);\r\n  };\r\n\r\n  const aiDeploy = () =>\r\n    shipsLengths.forEach((shipLength) => rndShipDeploy(shipLength));\r\n\r\n  const rndShipDeploy = (length) => {\r\n    setTimeout(() => {\r\n      setPreshowedCell(getRndCoords());\r\n      setCurSelectedShip({\r\n        length: length,\r\n        isRotate: getRandomInt(0, 1) === 1,\r\n      });\r\n    });\r\n  };\r\n\r\n  const getRndCoords = () => [getRandomInt(0, 9), getRandomInt(0, 9)];\r\n\r\n  const getRandomInt = (min, max) => {\r\n    min = Math.ceil(min);\r\n    max = Math.floor(max);\r\n    return Math.floor(Math.random() * (max - min + 1)) + min;\r\n  };\r\n\r\n  const deployShip = () => {\r\n    if (isDeployState) {\r\n      if (!isPlayerField && preshowedShip) {\r\n        if (!isIncorrectDeploy) {\r\n          setShips([...ships, preshowedShip]);\r\n        } else {\r\n          rndShipDeploy(preshowedShip.cells.length);\r\n        }\r\n      }\r\n\r\n      if (isPlayerField && !isIncorrectDeploy) {\r\n        if (curSelectedShip) {\r\n          setShips([...ships, preshowedShip]);\r\n          removeSelectedShip();\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  const shipIndexCheck = (iCoord, jCoord) => {\r\n    let shipIndex = null;\r\n\r\n    if (ships) {\r\n      for (let i = 0; i < ships.length; i++) {\r\n        const shipCells = ships[i].cells;\r\n\r\n        if (shipCells) {\r\n          for (let j = 0; j < shipCells.length; j++) {\r\n            if (shipCells[j][0] === iCoord && shipCells[j][1] === jCoord) {\r\n              shipIndex = i;\r\n              return shipIndex;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return shipIndex;\r\n  };\r\n\r\n  const cellPreshow = (coords) => isPlayerField && setPreshowedCell(coords);\r\n\r\n  const shipPreshow = () => {\r\n    if (curSelectedShip && preshowedCell) {\r\n      const length = curSelectedShip.length;\r\n      const isRotate = curSelectedShip.isRotate;\r\n      const shipExpansion = Math.floor(length / 2);\r\n      const isEvenLength = length % 2 === 0;\r\n      const i = preshowedCell[0];\r\n      const j = preshowedCell[1];\r\n      const curPreshowedShipCells = [];\r\n      let inc, dec;\r\n\r\n      if (!isRotate) {\r\n        inc = i;\r\n        dec = i;\r\n      } else if (isRotate) {\r\n        inc = j;\r\n        dec = j;\r\n      }\r\n\r\n      let isIncorrect = false;\r\n\r\n      let expansion = 0;\r\n      while (expansion < shipExpansion) {\r\n        expansion++;\r\n        inc++;\r\n        dec--;\r\n\r\n        const isRemoveTail = isEvenLength && expansion === shipExpansion;\r\n\r\n        if (!isIncorrect)\r\n          isIncorrect = !outFieldPreshowCheck(inc, dec, isRemoveTail, isRotate);\r\n\r\n        if (!isRotate) {\r\n          curPreshowedShipCells.push([dec, j]);\r\n\r\n          if (isRemoveTail) break;\r\n\r\n          curPreshowedShipCells.push([inc, j]);\r\n        } else {\r\n          curPreshowedShipCells.push([i, inc]);\r\n\r\n          if (isRemoveTail) break;\r\n\r\n          curPreshowedShipCells.push([i, dec]);\r\n        }\r\n      }\r\n\r\n      curPreshowedShipCells.push(preshowedCell);\r\n\r\n      if (!isIncorrect)\r\n        isIncorrect = !unoccupiedCellsCheck(curPreshowedShipCells);\r\n\r\n      setIsIncorrectDeploy(isIncorrect);\r\n      setPreshowedShip({ cells: curPreshowedShipCells, hp: length });\r\n    }\r\n  };\r\n\r\n  const unoccupiedCellsCheck = (ship) => {\r\n    if (ships && ship) {\r\n      const occupiedCellsCombinations = [];\r\n      ships.forEach((ship) => occupiedCellsCombinations.push(ship.cells));\r\n      const occupiedCells = occupiedCellsCombinations.flat();\r\n\r\n      for (let i = 0; i < occupiedCells.length; i++) {\r\n        const occupiedCoords = occupiedCells[i];\r\n\r\n        if (occupiedCoords) {\r\n          const cellMatch = ship.find(\r\n            (coords) =>\r\n              coords[0] === occupiedCoords[0] && coords[1] === occupiedCoords[1]\r\n          );\r\n\r\n          if (cellMatch) return false;\r\n        }\r\n      }\r\n    }\r\n    return true;\r\n  };\r\n\r\n  const outFieldPreshowCheck = (inc, dec, isRemoveTail, isRotate) => {\r\n    if (isRemoveTail) {\r\n      if (!isRotate) {\r\n        inc--;\r\n      } else {\r\n        dec++;\r\n      }\r\n    }\r\n    return inc >= 0 && inc < 10 && dec >= 0 && dec < 10;\r\n  };\r\n\r\n  const preshowDestroy = () => {\r\n    if (isPlayerField) {\r\n      setPreshowedShip(null);\r\n      setPreshowedCell(null);\r\n    }\r\n  };\r\n\r\n  const preshowCheck = (i, j) =>\r\n    preshowedShip &&\r\n    preshowedShip.cells.find((coords) => i === coords[0] && j === coords[1]);\r\n\r\n  const shipDeadCheck = (shipId) => ships[shipId] && ships[shipId].hp === 0;\r\n\r\n  const hit = (shipId) =>\r\n    ships[shipId] &&\r\n    setShips(\r\n      ships.map((ship, i) => {\r\n        if (i === shipId) {\r\n          const hp = --ship.hp;\r\n\r\n          if (hp === 0) setDeadsCount((prewDeadsCount) => ++prewDeadsCount);\r\n          return { cells: ship.cells, hp };\r\n        }\r\n        return ship;\r\n      })\r\n    );\r\n\r\n  const moveCheck = (moves, i, j) =>\r\n    moves.find((coords) => i === coords[0] && j === coords[1]);\r\n\r\n  const makeAiMove = () => {\r\n    let rndCoords;\r\n\r\n    while (true) {\r\n      rndCoords = getRndCoords();\r\n\r\n      if (!moveCheck(aiMoves, rndCoords[0], rndCoords[1])) break;\r\n    }\r\n\r\n    setAiMoves([...aiMoves, rndCoords]);\r\n  };\r\n\r\n  const makePlayerMove = (coords) => setPlayerMoves([...playerMoves, coords]);\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        className=\"field\"\r\n        onMouseLeave={() => preshowDestroy()}\r\n        onClick={() => deployShip()}\r\n      >\r\n        {cells &&\r\n          cells.map((row, i) =>\r\n            row.map((cell, j) => {\r\n              const id = shipIndexCheck(i, j);\r\n              return (\r\n                <Cell\r\n                  isPlayerCell={isPlayerField}\r\n                  preshow={cellPreshow.bind(this)}\r\n                  coords={[i, j]}\r\n                  shipId={id}\r\n                  isDeployState={isDeployState}\r\n                  isDead={!isDeployState && shipDeadCheck(id)}\r\n                  hit={hit.bind(this)}\r\n                  isAiMove={moveCheck(aiMoves, i, j)}\r\n                  isPlayerMove={moveCheck(playerMoves, i, j)}\r\n                  isCurMove={isCurMove}\r\n                  makeMove={makePlayerMove.bind(this)}\r\n                  key={i + j}\r\n                />\r\n              );\r\n            })\r\n          )}\r\n      </div>\r\n\r\n      {isPlayerField && isDeployState && (\r\n        <div className=\"field field--fake\">\r\n          {cells &&\r\n            cells.map((row, i) =>\r\n              row.map((cell, j) => (\r\n                <Cell\r\n                  isPreshowCell={curSelectedShip && preshowCheck(i, j)}\r\n                  shipId={shipIndexCheck(i, j)}\r\n                  isIncorrectPreshow={curSelectedShip && isIncorrectDeploy}\r\n                  key={i + j}\r\n                  isPlayerCell={true}\r\n                />\r\n              ))\r\n            )}\r\n        </div>\r\n      )}\r\n\r\n      {curSelectedShip && isPlayerField && (\r\n        <SelectedShip\r\n          ship={curSelectedShip}\r\n          sendRotate={sendRotate}\r\n          isDeployState={isDeployState}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Field;\r\n","import React from \"react\";\r\n\r\nconst Cell = ({\r\n  shipId,\r\n  selectShip,\r\n  isPlayerCell,\r\n  preshow,\r\n  coords,\r\n  isPreshowCell,\r\n  isIncorrectPreshow,\r\n  isDeployState,\r\n  isDead,\r\n  hit,\r\n  isAiMove,\r\n  isPlayerMove,\r\n  isCurMove,\r\n  makeMove,\r\n  isSelectedShip,\r\n}) => {\r\n  const isShip = shipId || shipId === 0;\r\n  const [isHit, setIsHit] = React.useState(false);\r\n  const [isMiss, setIsMiss] = React.useState(false);\r\n  const isHandleMove =\r\n    isCurMove && !isPlayerCell && !isDeployState && !isHit && !isMiss;\r\n\r\n  React.useEffect(() => {\r\n    if (isAiMove || isPlayerMove) showMove();\r\n  }, [isAiMove, isPlayerMove]);\r\n\r\n  const click = (e) => {\r\n    if (isHandleMove) {\r\n      makeMove(coords);\r\n    } else if (selectShip) {\r\n      selectShip(shipId, e);\r\n    }\r\n  };\r\n\r\n  const showMove = () => {\r\n    if (isShip) {\r\n      setIsHit(true);\r\n      hit(shipId);\r\n    } else {\r\n      setIsMiss(true);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div\r\n      onClick={(e) => click(e)}\r\n      onMouseOver={() => preshow && preshow(coords)}\r\n      style={{\r\n        transition:\r\n          isPlayerCell && !isDeployState\r\n            ? \"none\"\r\n            : \"background-color 1000ms ease\",\r\n      }}\r\n      className={\r\n        \"cell\" +\r\n        `${isShip && isPlayerCell ? \" cell--allied\" : \"\"}` +\r\n        `${\r\n          isPlayerCell && isDeployState && !isSelectedShip\r\n            ? \" cell--transparent\"\r\n            : \"\"\r\n        }` +\r\n        `${isPreshowCell && !isShip ? \" cell--preshow\" : \"\"}` +\r\n        `${\r\n          isPreshowCell && isIncorrectPreshow && !isShip\r\n            ? \" cell--incorrect\"\r\n            : \"\"\r\n        }` +\r\n        `${isHit && !isDead ? \" cell--hit\" : \"\"}` +\r\n        `${isDead && isShip ? \" cell--dead\" : \"\"}`\r\n      }\r\n    >{`${isMiss ? \"⚫\" : \"\"}`}</div>\r\n  );\r\n};\r\n\r\nexport default Cell;\r\n","import React from \"react\";\r\n\r\nimport { Cell } from \"../\";\r\n\r\nconst ShipsSelectArea = ({ shipsLengths, sendShip }) => {\r\n  const [cells, setCells] = React.useState();\r\n  const [ships, setShips] = React.useState([]);\r\n\r\n  React.useEffect(() => {\r\n    init();\r\n    shipsInit();\r\n  }, []);\r\n\r\n  const init = () => {\r\n    const fieldCells = [];\r\n\r\n    for (let i = 0; i < 6; i++) {\r\n      fieldCells[i] = new Array(21);\r\n\r\n      for (let j = 0; j < 21; j++) {\r\n        fieldCells[i][j] = null;\r\n      }\r\n    }\r\n\r\n    setCells(fieldCells);\r\n  };\r\n\r\n  const shipsInit = () => {\r\n    const initShips = [];\r\n    let column = -1;\r\n\r\n    shipsLengths.forEach((shipLength) => {\r\n      const ship = [];\r\n      column = column + 2;\r\n\r\n      for (let shipCell = 0; shipCell < shipLength; shipCell++) {\r\n        const row = shipCell + 1;\r\n\r\n        ship.push([row, column]);\r\n      }\r\n\r\n      initShips.push(ship);\r\n    });\r\n\r\n    setShips(initShips);\r\n  };\r\n\r\n  const shipIndexCheck = (iCoord, jCoord) => {\r\n    let shipIndex = null;\r\n\r\n    for (let i = 0; i < ships.length; i++) {\r\n      const ship = ships[i];\r\n\r\n      for (let j = 0; j < ship.length; j++) {\r\n        if (ship[j][0] === iCoord && ship[j][1] === jCoord) {\r\n          shipIndex = i;\r\n          return shipIndex;\r\n        }\r\n      }\r\n    }\r\n    return shipIndex;\r\n  };\r\n\r\n  const deleteShip = (shipId) =>\r\n    setShips(ships.filter((ship, id) => id !== shipId));\r\n\r\n  const selectShip = (id, e) => {\r\n    if (id || id === 0) {\r\n      const length = ships[id].length;\r\n      deleteShip(id);\r\n\r\n      sendShip({\r\n        id,\r\n        length,\r\n        x: e.pageX,\r\n        y: e.pageY,\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"ships-select-area__wrapper\">\r\n      <h2 className=\"ships-select-area__title\">Выберите корабли</h2>\r\n      <div className=\"ships-select-area\">\r\n        {cells &&\r\n          cells.map((row, i) =>\r\n            row.map((cell, j) => (\r\n              <Cell\r\n                shipId={shipIndexCheck(i, j)}\r\n                selectShip={selectShip.bind(this)}\r\n                isPlayerCell={true}\r\n                key={i + j}\r\n              />\r\n            ))\r\n          )}\r\n      </div>\r\n      <ul className=\"ships-select-area__tutorial\">\r\n        <li className=\"ships-select-area__tutorial-item\">\r\n          ЛКМ - выбор/размещение корабля\r\n        </li>\r\n        <li className=\"ships-select-area__tutorial-item\">\r\n          ПКМ - поворот выбранного корабля\r\n        </li>\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ShipsSelectArea;\r\n","import React from \"react\";\r\n\r\nimport { Cell } from \"../\";\r\n\r\nconst SelectedShip = ({ ship, sendRotate, isDeployState }) => {\r\n  const [x, setX] = React.useState();\r\n  const [y, setY] = React.useState();\r\n  const [width, setWidth] = React.useState();\r\n  const [height, setHeight] = React.useState();\r\n  const [columns, setColumns] = React.useState();\r\n  const [rows, setRows] = React.useState();\r\n  const [isRotate, setIsRotate] = React.useState();\r\n  const [renderShip, setRenderShip] = React.useState();\r\n\r\n  React.useEffect(() => createShip(), []);\r\n\r\n  React.useEffect(() => {\r\n    if (renderShip) {\r\n      const listener = (e) => {\r\n        if (e.type === \"mousemove\") {\r\n          moveAt(e.pageX, e.pageY);\r\n        } else if (e.type === \"contextmenu\") {\r\n          rotateShip(e);\r\n        }\r\n      };\r\n\r\n      const show = () => {\r\n        document.addEventListener(\"mousemove\", listener);\r\n        document.addEventListener(\"contextmenu\", listener);\r\n        moveAt(ship.x, ship.y);\r\n      };\r\n\r\n      const removeListeners = () => {\r\n        document.removeEventListener(\"mousemove\", listener);\r\n        document.removeEventListener(\"contextmenu\", listener);\r\n      };\r\n\r\n      show();\r\n\r\n      return removeListeners;\r\n    }\r\n  }, [renderShip]);\r\n\r\n  React.useEffect(() => sendRotate(isRotate), [isRotate]);\r\n\r\n  const rotateShip = (e) => {\r\n    e.preventDefault();\r\n\r\n    setIsRotate((prevIsRotate) => !prevIsRotate);\r\n  };\r\n\r\n  const moveAt = (x, y) => {\r\n    setX(x - width / 2);\r\n    setY(y - height / 2);\r\n  };\r\n\r\n  const createShip = () => {\r\n    const cellSize = 50;\r\n    const length = ship.length;\r\n    const width = cellSize;\r\n    const height = cellSize * length;\r\n\r\n    setX(ship.x);\r\n    setY(ship.y);\r\n    setWidth(width);\r\n    setHeight(height);\r\n    setColumns(1);\r\n    setRows(length);\r\n    setIsRotate(false);\r\n\r\n    const renderedShip = new Array(length);\r\n\r\n    for (let i = 0; i < length; i++) {\r\n      renderedShip[i] = (\r\n        <Cell\r\n          shipId={true}\r\n          isDeployState={isDeployState}\r\n          isPlayerCell={true}\r\n          isSelectedShip={true}\r\n          key={i}\r\n        />\r\n      );\r\n    }\r\n\r\n    setRenderShip(renderedShip);\r\n  };\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        left: `${x}px`,\r\n        top: `${y}px`,\r\n        width: `${width}px`,\r\n        height: `${height}px`,\r\n        gridTemplateColumns: `repeat(${columns}, 1fr)`,\r\n        gridTemplateRows: `repeat(${rows}, calc(100% / ${rows}))`,\r\n        transform: `rotate(${!isRotate ? 0 : 90}deg)`,\r\n      }}\r\n      className=\"selected-ship\"\r\n    >\r\n      {renderShip}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SelectedShip;\r\n","import { StartForm, Stats } from \"../components\";\r\n\r\nfunction Home({ setGameProps }) {\r\n  return (\r\n    <div className=\"content\">\r\n      <StartForm setGameProps={setGameProps} />\r\n      <Stats />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Home;\r\n","class Player {\r\n    constructor(name) {\r\n        if (name) {\r\n            this.name = name;\r\n            this.isAi = false;\r\n        } else {\r\n            this.name = 'AI';\r\n            this.isAi = true;\r\n        }\r\n    }\r\n}\r\n\r\nexport default Player;","import React from \"react\";\r\nimport { Redirect } from \"react-router\";\r\n\r\nimport { Field, ShipsSelectArea } from \"../../components\";\r\nimport Player from \"./Player\";\r\n\r\nconst Game = ({ gameProps, sendPlayersNames, isEndGame }) => {\r\n  const shipsLengths = [4, 3, 3, 2, 2, 2, 1, 1, 1, 1];\r\n  const [players] = React.useState([]);\r\n  const [curPLayer, setCurPlayer] = React.useState();\r\n  const [selectedShip, setSelectedShip] = React.useState();\r\n  const [isDeployState, setIsDeployState] = React.useState(true);\r\n\r\n  React.useEffect(() => {\r\n    if (gameProps.side === \"left\") {\r\n      players.push(new Player(gameProps.name));\r\n      players.push(new Player());\r\n    } else if (gameProps.side === \"right\") {\r\n      players.push(new Player());\r\n      players.push(new Player(gameProps.name));\r\n    }\r\n    setCurPlayer(players[0]);\r\n  }, []);\r\n\r\n  const changeDeployState = () =>\r\n    setIsDeployState((prevDeployState) => !prevDeployState);\r\n\r\n  const winGame = (fieldId) => {\r\n    const loserId = fieldId;\r\n    const winnerId = loserId === 0 ? 1 : 0;\r\n\r\n    sendPlayersNames({\r\n      winnerName: players[winnerId].name,\r\n      loserName: players[loserId].name,\r\n    });\r\n  };\r\n\r\n  const changeCurPlayer = () =>\r\n    setCurPlayer((prevCurPlayer) => {\r\n      const curPlayerId = prevCurPlayer === players[0] ? 1 : 0;\r\n      return players[curPlayerId];\r\n    });\r\n\r\n  const selectShip = (ship) => setSelectedShip(ship);\r\n\r\n  const setRotate = (rotate) =>\r\n    setSelectedShip((prevShip) => {\r\n      const ship = {\r\n        ...prevShip,\r\n        isRotate: rotate,\r\n      };\r\n      return ship;\r\n    });\r\n\r\n  return !isEndGame ? (\r\n    <div className=\"content\">\r\n      <div className=\"fields-wrapper\">\r\n        {players.map((player, id) => (\r\n          <div\r\n            className=\"field-wrapper\"\r\n            style={{ zIndex: id === 1 && player.isAi ? 0 : 1 }}\r\n            key={player.name}\r\n          >\r\n            <h2 className=\"player-name\">{player.name}</h2>\r\n            <Field\r\n              id={id}\r\n              shipsLengths={shipsLengths}\r\n              isPlayerField={!player.isAi}\r\n              selectedShip={!player.isAi && selectedShip}\r\n              sendRotate={setRotate.bind(this)}\r\n              removeSelectedShip={selectShip.bind(this)}\r\n              endDeployState={changeDeployState.bind(this)}\r\n              isDeployState={isDeployState}\r\n              isCurMove={!isDeployState && curPLayer !== player}\r\n              changeMove={changeCurPlayer.bind(this)}\r\n              endGame={winGame.bind(this)}\r\n            />\r\n          </div>\r\n        ))}\r\n      </div>\r\n      {!isDeployState && (\r\n        <h3 className=\"cur-move\">Ход игрока {curPLayer.name}...</h3>\r\n      )}\r\n      {isDeployState && (\r\n        <ShipsSelectArea\r\n          shipsLengths={shipsLengths}\r\n          sendShip={selectShip.bind(this)}\r\n        />\r\n      )}\r\n    </div>\r\n  ) : (\r\n    <Redirect to=\"/endgame\" />\r\n  );\r\n};\r\n\r\nexport default Game;\r\n","import { EndGameWindow } from \"../components\";\r\nimport { Stats } from \"../components\";\r\n\r\nfunction EndGame({winnerName,removePlayersNames}) {\r\n  return (\r\n    <div className=\"content\">\r\n      <EndGameWindow winnerName={winnerName} removePlayersNames={removePlayersNames} />\r\n      <Stats />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default EndGame;\r\n","import React from 'react';\nimport { Route } from 'react-router-dom';\n\nimport { Header } from './components';\nimport { Home, Game, EndGame } from './pages';\n\nfunction App() {\n  const [gameProps, setGameProps] = React.useState();\n  const [playersNames, setPlayersNames] = React.useState();\n\n  React.useEffect(() => playersNames && saveStats(), [playersNames]);\n\n  const saveStats = () => {\n    let stats = JSON.parse(localStorage.getItem('stats'));\n\n    if (!stats) stats = [];\n\n    const winnerStat = stats.find(playerStat => playerStat.name === playersNames.winnerName);\n    const loserStat = stats.find(playerStat => playerStat.name === playersNames.loserName);\n\n    [winnerStat, loserStat].forEach((stat, i) => {\n      const isWinStat = i === 0;\n      const name = isWinStat ? playersNames.winnerName : playersNames.loserName;\n      const count = isWinStat ? 'winCount' : 'loseCount';\n\n      if (!stat) {\n        stat = { name, winCount: 0, loseCount: 0 };\n        stats.push(stat);\n      }\n\n      ++stat[count];\n    })\n\n    statsSort(stats);\n    stats = JSON.stringify(stats);\n    localStorage.setItem('stats', stats);\n  }\n\n  const statsSort = (stats) => stats.sort((a, b) => b.winCount - a.winCount);\n\n  const removePlayersNames = () => setPlayersNames(null);\n\n  return (\n    <>\n      <Header />\n      <Route path=\"/\" render={() => <Home setGameProps={setGameProps} />} exact />\n      <Route path=\"/game\" render={() => <Game\n        gameProps={gameProps}\n        sendPlayersNames={setPlayersNames}\n        isEndGame={playersNames ? true : false} />}\n        exact />\n      <Route path=\"/endgame\" render={() => <EndGame\n        winnerName={playersNames.winnerName}\n        removePlayersNames={removePlayersNames.bind(this)}\n      />} exact />\n    </>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\n\nimport './styles.scss';\nimport App from './App';\n\nReactDOM.render(\n  <BrowserRouter>\n   <App/>\n  </BrowserRouter>,\n  document.getElementById('root')\n);"],"sourceRoot":""}